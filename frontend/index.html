<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Study Drive – Admin</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- ===== Admin Login Screen ===== -->
  <div id="adminLogin" class="admin-login">
    <div class="admin-login-card">
      <h1 class="admin-login-title">Admin Login</h1>
      <p class="admin-login-subtitle">
        Enter your admin token to manage uploads, deletes, renames & moves.
      </p>
      <form id="adminLoginForm" class="admin-login-form">
        <label for="adminTokenInput" class="field-label">
          <span class="field-title">Admin token</span>
          <span class="field-hint">Use the same token configured in Render (ADMIN_TOKEN)</span>
        </label>
        <input
          type="password"
          id="adminTokenInput"
          class="text-input"
          placeholder="Paste your admin token here"
          autocomplete="off"
        />
        <button type="submit" class="primary-btn" style="margin-top:8px;">
          Continue to dashboard
        </button>
        <p
          id="adminLoginError"
          style="margin:6px 0 0;font-size:12px;color:#fecaca;display:none;"
        ></p>
      </form>
    </div>
  </div>

  <!-- ===== Main Admin App (hidden until login) ===== -->
  <div id="adminApp" class="app-root hidden">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <div class="sidebar-icon">SD</div>
          <div class="sidebar-text">
            <span class="sidebar-title">My Study Drive</span>
            <span class="sidebar-subtitle">Study. Store. Repeat.</span>
          </div>
        </div>
        <button id="sidebarToggle" class="sidebar-toggle" aria-label="Toggle menu">
          ☰
        </button>
      </div>

      <nav class="sidebar-nav">
        <div class="sidebar-section-label">Overview</div>
        <button class="nav-item active">
          <span>Dashboard</span>
        </button>
        <button class="nav-item">
          <span>All files</span>
        </button>

        <div class="sidebar-section-label">Organize</div>
        <button class="nav-item" id="navFavorites">
          <span>Favorites</span>
        </button>
        <button class="nav-item disabled">
          <span>Shared with me (soon)</span>
        </button>
      </nav>

      <div class="sidebar-footer">
        <div class="sidebar-storage">
          <div class="storage-top">
            <span>Storage used</span>
            <span id="storagePercentLabel">0%</span>
          </div>
          <div class="storage-bar">
            <div id="storageBarFill" class="storage-bar-fill"></div>
          </div>
          <div class="storage-bottom">
            <span id="totalSizeSidebar">0 KB</span>
            <span>of 1 GB</span>
          </div>
        </div>

        <div class="sidebar-user">
          <div class="user-avatar">BY</div>
          <div class="user-info">
            <span class="user-name">Bikash</span>
            <span class="user-tag">Student · Dev</span>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main content -->
    <div class="main-area">
      <!-- Top bar -->
      <header class="top-bar">
        <div class="top-left">
          <h1 class="page-title">Dashboard</h1>
          <p class="page-subtitle">Upload, organize & review all your notes in one place.</p>
        </div>
        <div class="top-right">
          <div class="stat-card">
            <span class="stat-label">Total files</span>
            <span id="fileCount" class="stat-value">0</span>
          </div>
          <div class="stat-card">
            <span class="stat-label">Storage used</span>
            <span id="totalSize" class="stat-value">0 KB</span>
          </div>
        </div>
      </header>

      <!-- Content layout -->
      <main class="main-layout">
        <!-- Left: upload + filters -->
        <section class="left-column">
          <!-- Upload area -->
          <section class="card upload-card">
            <div class="card-header">
              <h2>Upload files</h2>
              <p class="muted small">
                Drag &amp; drop or browse – we’ll organize them by folder.
              </p>
            </div>

            <form id="uploadForm" class="upload-form">
              <div id="dropZone" class="drop-zone">
                <input type="file" id="fileInput" name="document" multiple class="drop-zone-input" />
                <div class="drop-zone-content">
                  <div class="drop-zone-icon">⬆️</div>
                  <div class="drop-zone-text-main">Drop files here to upload</div>
                  <div class="drop-zone-text-sub">
                    or <span class="browse-text">browse</span> from your device
                  </div>
                  <div class="drop-zone-hint">
                    PDF / Images / Docs · max 20 MB per file
                  </div>
                </div>
              </div>

              <ul id="selectedFilesList" class="selected-files"></ul>

              <!-- Folder -->
              <label for="folderInput" class="field-label">
                <span class="field-title">Folder (optional)</span>
                <span class="field-hint">e.g. os, dbms, semester-5</span>
              </label>
              <input
                type="text"
                id="folderInput"
                class="text-input"
                placeholder="If empty, file goes to 'root'"
              />

              <button type="submit" class="primary-btn">
                Upload selected files
              </button>

              <div id="status" class="status-message"></div>
            </form>

            <!-- Upload queue -->
            <div id="uploadQueue" class="upload-queue hidden">
              <div class="upload-queue-header">
                <span>Upload queue</span>
                <button id="clearQueueBtn" type="button" class="queue-clear-btn">
                  Clear
                </button>
              </div>
              <div id="uploadQueueList" class="upload-queue-list"></div>
            </div>
          </section>

          <!-- Filters -->
          <section class="card filters-card">
            <div class="card-header">
              <h2>Filters</h2>
            </div>
            <div class="filters">
              <div class="filter-group">
                <label for="searchInput">Search by name</label>
                <input
                  type="text"
                  id="searchInput"
                  class="text-input"
                  placeholder="e.g. os-notes.pdf"
                />
              </div>

              <div class="filter-chips">
                <button class="chip chip-active" data-chip="all">All</button>
                <button class="chip" data-chip="pdf">PDFs</button>
                <button class="chip" data-chip="image">Images</button>
                <button class="chip" data-chip="doc">Docs</button>
                <button class="chip" data-chip="favorites">Favorites</button>
              </div>

              <div class="filter-row">
                <div class="filter-group">
                  <label for="folderFilter">Folder</label>
                  <select id="folderFilter" class="select-input">
                    <option value="all">All folders</option>
                  </select>
                </div>

                <div class="filter-group">
                  <label for="sortSelect">Sort by</label>
                  <select id="sortSelect" class="select-input">
                    <option value="newest">Newest first</option>
                    <option value="oldest">Oldest first</option>
                    <option value="az">Name A → Z</option>
                    <option value="za">Name Z → A</option>
                    <option value="sizeAsc">Size small → large</option>
                    <option value="sizeDesc">Size large → small</option>
                  </select>
                </div>
              </div>

              <div class="filter-row">
                <div class="filter-group">
                  <label for="typeFilter">Type (extra filter)</label>
                  <select id="typeFilter" class="select-input">
                    <option value="all">All types</option>
                    <option value="pdf">PDFs</option>
                    <option value="image">Images</option>
                    <option value="doc">Documents</option>
                    <option value="other">Others</option>
                  </select>
                </div>

                <div class="filter-group view-toggle-group">
                  <span class="view-label">View</span>
                  <div class="view-buttons">
                    <button type="button" id="gridViewBtn" class="view-btn active">
                      Grid
                    </button>
                    <button type="button" id="listViewBtn" class="view-btn">
                      List
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </section>

        <!-- Right: files -->
        <section class="right-column">
          <header class="right-header">
            <div>
              <h2>Your files</h2>
              <p class="muted small">
                Click to preview PDFs &amp; images, or open / download the file.
              </p>
            </div>
          </header>

          <div id="fileList" class="file-list file-list--loading">
            <div class="skeleton-list">
              <div class="skeleton-item"></div>
              <div class="skeleton-item"></div>
              <div class="skeleton-item"></div>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- Preview modal -->
  <div id="previewModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <button id="closePreviewBtn" class="close-btn" aria-label="Close preview">
        &times;
      </button>
      <div id="previewBody" class="preview-body"></div>
    </div>
  </div>

  <!-- File details modal -->
  <div id="detailsModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <button id="closeDetailsBtn" class="close-btn" aria-label="Close details">
        &times;
      </button>
      <div id="detailsBody" class="preview-body">
        <!-- Populated by JS -->
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast hidden"></div>

  <script src="app.js"></script>
</body>

</html>
